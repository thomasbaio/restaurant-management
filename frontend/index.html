<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Gestione Menu</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1>Menu Ristorante</h1>

  <!-- Messaggio utente -->
  <div id="user-info" style="margin-bottom: 20px;"></div>

  <!-- ‚úÖ Vista men√π per ristorante -->
  <section style="margin:24px 0;">
    <h2 style="margin:0 0 10px;">üè∑Ô∏è Men√π per Ristorante</h2>
    <div id="menu-per-ristorante"></div>
  </section>

  <!-- Aggiungi solo se ristoratore -->
  <div id="add-meal-container" style="margin-top: 20px;"></div>

  <script src="js/main.js" defer></script>

  <script>
    const user = JSON.parse(localStorage.getItem("loggedUser"));
    const info = document.getElementById("user-info");
    const addContainer = document.getElementById("add-meal-container");

    if (user) {
      info.innerHTML = `
        <strong>Benvenuto, ${user.username}</strong> (${user.role}) |
        <a href="order.html">Ordina</a> |
        <a href="edituser.html">Modifica Profilo</a> |
        <a href="#" onclick="logout()">Logout</a>
      `;
      if (user.role === "ristoratore") {
        addContainer.innerHTML = `<button onclick="location.href='add.html'">Aggiungi nuovo piatto</button>`;
      }
    } else {
      info.innerHTML = `
        <a href="login.html">Accedi</a> |
        <a href="register.html">Registrati</a>
      `;
    }

    function logout() {
      localStorage.removeItem("loggedUser");
      window.location.reload();
    }
  </script>
</body>
</html>
